let ProductData = [
  {
    id: 1,
    name: "Sunstar Fresh Melon Juice",
    rating: "4.5",
    prevPrice: 22,
    price: 10.0,
    imgsrc: "./Assets/sunstar_fresh_melon_juice.png",
  },
  {
    id: 2,
    name: "Fresh local tomatoes",
    rating: "4.3",
    prevPrice: 8,
    price: 5.0,
    imgsrc: "./Assets/Fresh_local_tomatoes.png",
  },
  {
    id: 3,
    name: "Fresh Cucumber",
    rating: "4.5",
    prevPrice: 9,
    price: 4.0,
    imgsrc: "./Assets/Fresh_cucmber.png",
  },
  {
    id: 4,
    name: "Heinz tomato ketchup",
    rating: "5.0",
    prevPrice: 12,
    price: 9,
    imgsrc: "./Assets/Heniz_tomato_ketchup.png",
  },
  {
    id: 5,
    name: "Local Avocado",
    rating: "4.7",
    prevPrice: 8,
    price: 4,
    imgsrc: "./Assets/Local_avacado.png",
  },
  {
    id: 6,
    name: "Munch Crunchy Cookies",
    rating: "4.5",
    prevPrice: 10,
    price: 8,
    imgsrc: "./Assets/Munch_crunchy_cookies.png",
  },
  {
    id: 7,
    name: "Fresh Bananas",
    rating: "5",
    prevPrice: 15,
    price: 10,
    imgsrc: "./Assets/Fresh_bananas.png",
  },
  {
    id: 8,
    name: "Fresh Orange Juice",
    rating: "4.5",
    prevPrice: 15,
    price: 12,
    imgsrc: "./Assets/Fresh_orange_juice.png",
  },
  {
    id: 9,
    name: "Pure Dairy milk ",
    rating: "5",
    prevPrice: 8,
    price: 4,
    imgsrc: "./Assets/Pure_dairy_milk.png",
  },
  {
    id: 10,
    name: "Raspberries",
    rating: "5",
    prevPrice: 20,
    price: 15,
    imgsrc: "./Assets/Raspberries.png",
  },
  {
    id: 11,
    name: "French Cheese Lays",
    rating: "5",
    prevPrice: 5,
    price: 3,
    imgsrc: "./Assets/Lays.png",
  },
  {
    id: 12,
    name: "Amber pure honey",
    rating: "4.5",
    prevPrice: 25,
    price: 20,
    imgsrc: "./Assets/Amber_pure_honey.png",
  },
  {
    id: 13,
    name: "Pharma Cashew butter",
    rating: "5",
    prevPrice: 30,
    price: 25,
    imgsrc: "./Assets/Pharma_cashew_butter.png",
  },
  {
    id: 14,
    name: "Suzane creamy Cupcake",
    rating: "4.2",
    prevPrice: 15,
    price: 11,
    imgsrc: "./Assets/Suzane_creamy_cupcake.png",
  },
  {
    id: 15,
    name: "1.5 Liter Coca Cola",
    rating: "5",
    prevPrice: 9,
    price: 4,
    imgsrc: "./Assets/Coca_cola.jpg",
  },
  {
    id: 16,
    name: "Mango",
    rating: "5",
    prevPrice: 11,
    price: 7,
    imgsrc: "./Assets/Mango.png",
  },
];

let BestSellingProductsData = [
  {
    id: 17,
    name: "Fresh Lemon",
    rating: "4.5",
    prevPrice: 25,
    price: 20,
    imgsrc: "./Assets/Fresh_lemon.png",
  },
  {
    id: 18,
    name: "Apple Juice",
    rating: "4.3",
    prevPrice: 8,
    price: 5,
    imgsrc: "./Assets/Apple_juice.png",
  },
  {
    id: 19,
    name: "Katz White Bread",
    rating: "4.5",
    prevPrice: 9,
    price: 4,
    imgsrc: "./Assets/Katz_white_bread.png",
  },
  {
    id: 20,
    name: "Eminent Chocolate Cookies",
    rating: "5.0",
    prevPrice: 12,
    price: 9,
    imgsrc: "./Assets/Eminent_chocolate_cookies.png",
  },
  {
    id: 21,
    name: "Organic Butter",
    rating: "4.7",
    prevPrice: 8,
    price: 4,
    imgsrc: "./Assets/Organic_butter.png",
  },
  {
    id: 22,
    name: "Local Honey",
    rating: "4.5",
    prevPrice: 10,
    price: 8,
    imgsrc: "./Assets/Local_honey.png",
  },
];
let JustLandedProductsData = [
  {
    id: 23,
    name: "Jelly beans exxotics",
    rating: "4.5",
    prevPrice: 22,
    price: 10.0,
    imgsrc: "./Assets/Jelly_beans_exotics.png",
  },
  {
    id: 24,
    name: "Growers cider",
    rating: "4.3",
    prevPrice: 8,
    price: 5,
    imgsrc: "./Assets/Growers_cider.png",
  },
  {
    id: 25,
    name: "Fresh Grapes",
    rating: "4.5",
    prevPrice: 9,
    price: 4,
    imgsrc: "./Assets/Fresh_grapes.png",
  },
  {
    id: 26,
    name: "Fresh Pineapple",
    rating: "5.0",
    prevPrice: 12,
    price: 9,
    imgsrc: "./Assets/Fresh_pineapple.png",
  },
  {
    id: 27,
    name: "Fresh Pomegranate",
    rating: "4.7",
    prevPrice: 8,
    price: 4,
    imgsrc: "./Assets/Fresh_pomegranate.png",
  },
  {
    id: 28,
    name: "Fresh Dates",
    rating: "4.5",
    prevPrice: 10,
    price: 8,
    imgsrc: "./Assets/Fresh_dates.png",
  },
];
let TopOfferedProducts = [
  {
    id: 29,
    name: "Pacific barista beverage",
    rating: "4.5",
    prevPrice: 22,
    price: 10.0,
    imgsrc: "./Assets/Pacific_barista_beverage.png",
  },
  {
    id: 30,
    name: "Kombucha local lilikoi",
    rating: "4.3",
    prevPrice: 8,
    price: 5,
    imgsrc: "./Assets/Kombucha_local_lilikoi.png",
  },
  {
    id: 31,
    name: "Oat milk barista",
    rating: "4.5",
    prevPrice: 9,
    price: 4,
    imgsrc: "./Assets/Oat_milk_barista.png",
  },
  {
    id: 32,
    name: "DairyMilk Chocolate",
    rating: "5.0",
    prevPrice: 12,
    price: 9,
    imgsrc: "./Assets/Dairymilk_chocolate.png",
  },
  {
    id: 33,
    name: "Dr. raw relax hearts",
    rating: "4.7",
    prevPrice: 8,
    price: 4,
    imgsrc: "./Assets/Dr_raw_relax_hearts.png",
  },
  {
    id: 34,
    name: "Fresh Brocolli",
    rating: "4.5",
    prevPrice: 10,
    price: 8,
    imgsrc: "./Assets/Fresh_brocolli.png",
  },
];
//*Importing Funtion

//*Showing Data for Trending Prodcuts

let Product = document.querySelector("#trendingProducts");

let basket = JSON.parse(localStorage.getItem("data")) || [];

let generateShopItems = () => {
  return (Product.innerHTML = ProductData.map((val) => {
    let { name, prevPrice, price, imgsrc, rating, id } = val;
    let search = basket.find((val) => val.id === id) || [];
    return `<div
    class="flex flex-col w-[303px] h-[460px] rounded-xl py-3 px-4 shadow-md border border-[#f1f1f1] gap-y-2 hover:shadow-sm duration-300 group overflow-hidden" 
  >
    <div class="h-3/5 bg-[#F9F9F9] rounded-xl grid place-items-center relative w-full">
    <span class="absolute  cursor-pointer z-10" onclick="wishlistItem(${id})" style="right:6px;top:4px" >
    <i class="fa-solid fa-heart text-slate-300 text-xl" id=wishlist${id}></i>
  </span>
   
      <img src=${imgsrc} class="drop-shadow-2xl object-contain group-hover:scale-125 duration-300" alt="" />
    </div>
    <div class="h-2/5 flex flex-col gap-y-1">
      <h5 class="tet-[#333333] text-xl font-medium font-nunitofont capitalize">
        ${name}
      </h5>
      <div class="">
        <span class="text-[#9D9D9D]">1 Unit</span>
        <i class="fa-solid fa-star text-[#FFC43F] ml-3"></i> ${rating}
      </div>
      <div class="">
        <del class="text-[#9D9D9D] mr-2">$${prevPrice}</del>
        <span class="font-opensans text-xl text-[#222222]">$${price.toFixed(
          1
        )}</span>
      </div>
      <span class="text-[#ED8939]">Sold:11/12</span>
      <div class="flex justify-between items-center mt-2">
      <div class="flex items-center gap-x-2">
        <button
          class="w-8 h-8 rounded-lg  border border-gray-400" onclick="increment(${id})"
        >
          <i class="fa-solid fa-plus text-sm font-medium"></i>
        </button>
        <span id=quantity${id}>${
      search.quantity === undefined ? 0 : search.quantity
    }</span>
        <button
          class="w-9 h-8 flex justify-center items-center rounded-lg  border border-gray-400" onclick="decrement(${id})"
        >
        <i class="fa-solid fa-minus"></i>
        </button>
      </div>
      <button
        class="flex items-center gap-x-2 cursor-pointer px-4 py-2 rounded-md  text-[#666666]"   onclick="increment(${id})"
      >
        <h4 class="">Add to Cart</h4>
        <span>
          <i class="fa-solid fa-cart-shopping  "></i>
        </span>
      </button>
    </div>
    </div>
  </div>
  `;
  }).join(""));
};

generateShopItems();

//* Generating Slider Products Data

let generateSliderProduct = (wraper, Data) => {
  return (wraper.innerHTML = Data.map((val) => {
    let { name, prevPrice, price, imgsrc, rating, id } = val;
    let search = basket.find((val) => val.id === id) || [];
    return `<div class="swiper-slide  flex justify-center items-center">
    <div
    class="flex flex-col w-[303px] h-[460px] rounded-xl py-3 px-4 shadow-md border border-[#f1f1f1] gap-y-2 hover:shadow-sm duration-300 group overflow-hidden" 
  >
    <div class="h-3/5 bg-[#F9F9F9] rounded-xl grid place-items-center relative">
    <span class="absolute  cursor-pointer z-10" onclick="wishlistItem(${id})" style="right:6px;top:4px">
    <i class="fa-solid fa-heart text-slate-300 text-xl" id=wishlist${id}></i>
  </span>
      <img src=${imgsrc} class=" drop-shadow-2xl group-hover:scale-125 object-contain duration-300  " alt="" />
    </div>
    <div class="h-2/5 flex flex-col gap-y-1">
      <h5 class="tet-[#333333] text-xl font-medium font-nunitofont capitalize">
        ${name}
        </h5>
        <div class="">
          <span class="text-[#9D9D9D]">1 Unit</span>
          <i class="fa-solid fa-star text-[#FFC43F] ml-3"></i> ${rating}
        </div>
        <div class="">
          <del class="text-[#9D9D9D] mr-2">$${prevPrice}</del>
          <span class="font-opensans text-xl text-[#222222]"> $${price.toFixed(
            1
          )}</span>
        </div>
        <span class="text-[#ED8939]">Sold:11/12</span>
        <div class="flex justify-between items-center mt-2">
        <div class="flex items-center gap-x-2">
          <button
            class="w-8 h-8 rounded-lg  border border-gray-400" onclick="increment(${id})" id="raja"
          >
            <i class="fa-solid fa-plus text-sm font-medium"></i>
          </button>
          <span id=quantity${id}>${
      search.quantity === undefined ? 0 : search.quantity
    }</span>
          <button
          class="w-9 h-8 flex justify-center items-center rounded-lg  border border-gray-400" onclick="decrement(${id})"
        >
        <i class="fa-solid fa-minus "></i>
        </button>
      </div>
      <button
        class="flex items-center gap-x-2 cursor-pointer px-4 py-2 rounded-md addToCart"  onclick="increment(${id})"
      >
        <h4 class="text-[#666666]">Add to Cart</h4>
        <span>
          <i class="fa-solid fa-cart-shopping text-[#666666]"></i>
        </span>
      </button>
    </div>
    </div>
  </div>
  </div>
`;
  }).join(""));
};

//*Best Selling Products  Section

let swiperWraper = document.querySelector("#swiper-wrapper1");

//*Top Just Landed Items Section
let swiperWraper2 = document.querySelector("#swiper-wrapper2");

//*Top Offered Products Section
let swiperWraper3 = document.querySelector("#swiper-wrapper3");

generateSliderProduct(swiperWraper3, TopOfferedProducts);
generateSliderProduct(swiperWraper, BestSellingProductsData);
generateSliderProduct(swiperWraper2, JustLandedProductsData);

//?Cart Functionality

let wishlist = [];

let wishlistItem = (id) => {
  let selectedItem = id;
  let search = wishlist.find((val) => val.id === selectedItem);
  if (search === undefined) {
    wishlist.push({
      id: selectedItem,
      item: 1,
    });
  } else {
    return;
  }
  calculateWishListItem(selectedItem);
  let x = (document.getElementById(`wishlist${id}`).style.color = "red");
};

let calculateWishListItem = (id) => {
  let wishlistQuantity = document.querySelector("#wishlist");
  let amount = wishlist.map((val) => val.item).reduce((x, y) => x + y);

  wishlistQuantity.innerHTML = amount;
};

let increment = (id) => {
  let selectedItem = id;
  let search = basket.find((val) => val.id === selectedItem);
  if (search === undefined) {
    basket.push({
      id: selectedItem,
      quantity: 1,
    });
  } else {
    search.quantity += 1;
  }
  localStorage.setItem("data", JSON.stringify(basket));
  update(selectedItem);
};

let decrement = (id) => {
  let selectedItem = id;
  let search = basket.find((val) => val.id === selectedItem);
  if (search === undefined) {
    return;
  } else if (search.quantity === 0) {
    return;
  } else {
    search.quantity -= 1;
  }
  update(selectedItem);
  basket = basket.filter((item) => item.quantity !== 0);

  localStorage.setItem("data", JSON.stringify(basket));
};

let update = (id) => {
  let search = basket.find((val) => val.id === id);
  document.getElementById(`quantity${id}`).innerHTML = search.quantity;
  calculateItems();
  // generateShopItems();
  // generateSliderProduct();
};

let calculateItems = () => {
  let cartTotalQuntity = document.querySelector("#cartTotalQuantity");
  let totalQuantity = basket
    .map((val) => val.quantity)
    .reduce((x, y) => x + y, 0);
  cartTotalQuntity.innerHTML = totalQuantity;
};
calculateItems();
